<?xml version="1.0" encoding="UTF-8"?>
<!--
/*
 *                  Aozan development code
 *
 * This code may be freely distributed and modified under the
 * terms of the GNU General Public License version 3 or later
 * and CeCILL. This should be distributed with the code. If you
 * do not have a copy, see:
 *
 *      http://www.gnu.org/licenses/gpl-3.0-standalone.html
 *      http://www.cecill.info/licences/Licence_CeCILL_V2-en.html
 *
 * Copyright for this code is held jointly by the Genomic platform
 * of the Institut de Biologie de l'École Normale Supérieure and
 * the individual authors. These should be listed in @author doc
 * comments.
 *
 * For more information on the Aozan project and its aims,
 * or to join the Aozan Google group, visit the home page at:
 *
 *      http://outils.genomique.biologie.ens.fr/aozan
 *
 */
-->
<document>

  <properties>
    <title>QC projects tests</title>
    <author email="jourdren@biologie.ens.fr">Laurent Jourdren</author>
  </properties>

  <body>

    <section name="Projects quality control tests">

      <p>User can add project tests to be performed in this steps, if the demultiplexing statistic file is available.
      The order of the parameters in the Aozan configuration file will be reused in the report generated by this step.
      Each test can use several parameters and contains always an "<b>enable</b>" property to activate the test.
      Usually a property named "<b>interval</b>" exists for each test, however if this property is not set, the value will be computed but not checked if it is the correct interval.
      The project tests reuse data collected from samples tests and other quality control tests <a href="qc-samples-tests.html#contamination"> on detection contamination</a> and <a href="qc-samples-tests.html#recoveryclusters">analysis undetermined clusters</a>.
      Please report to those documentation pages for more information.
      You will find below all the parameters for all the available tests in Aozan:</p>

      <h4>Configuration project statistics quality tests</h4>

      <table>
        <tr><th>Aozan property</th><th>Type</th><th>Default value</th><th>Description</th></tr>

        <tr><td>qc.test.project.sample.count.enable</td><td>boolean</td><td>False</td><td>Enable project sample count test</td></tr>

        <tr><td>qc.test.project.genome.names.enable</td><td>boolean</td><td>False</td><td>Enable genomes project names test</td></tr>

        <tr><td>qc.test.project.lane.count.enable</td><td>boolean</td><td>False</td><td>Enable project lane count test</td></tr>

        <tr><td>qc.test.project.is.indexed.enable</td><td>boolean</td><td>False</td><td>Enable project is indexed test</td></tr>

        <tr><td>qc.test.project.min.raw.cluster.count.enable</td><td>boolean</td><td>False</td><td>Enable project minimum raw cluster count test</td></tr>
        <tr><td>qc.test.project.min.raw.cluster.count.interval</td><td>integer interval</td><td>Not set</td><td>Interval for valid values</td></tr>

        <tr><td>qc.test.project.max.raw.cluster.count.enable</td><td>boolean</td><td>False</td><td>Enable project maximum raw cluster count  test</td></tr>
        <tr><td>qc.test.project.max.raw.cluster.count.interval</td><td>integer interval</td><td>Not set</td><td>Interval for valid values</td></tr>

        <tr><td>qc.test.project.raw.cluster.count.enable</td><td>boolean</td><td>False</td><td>Enable project raw cluster count test</td></tr>
        <tr><td>qc.test.project.raw.cluster.count.interval</td><td>integer interval</td><td>Not set</td><td>Interval for valid values</td></tr>

        <tr><td>qc.test.project.min.pf.cluster.count.enable</td><td>boolean</td><td>False</td><td>Enable project minimum passing filter cluster count test</td></tr>
        <tr><td>qc.test.project.min.pf.cluster.count.interval</td><td>integer interval</td><td>Not set</td><td>Interval for valid values</td></tr>

        <tr><td>qc.test.project.max.pf.cluster.count.enable</td><td>boolean</td><td>False</td><td>Enable project maximum passing filter cluster count test</td></tr>
        <tr><td>qc.test.project.max.pf.cluster.count.interval</td><td>integer interval</td><td>Not set</td><td>Interval for valid values</td></tr>

        <tr><td>qc.test.project.pf.cluster.count.enable</td><td>boolean</td><td>False</td><td>Enable project project passing filter cluster count</td></tr>
        <tr><td>qc.test.project.pf.cluster.count.interval</td><td>integer interval</td><td>False</td><td>Interval for valid values</td></tr>
        
        <!--tr><td>qc.test.recoverablerawcluster.enable</td><td>integer</td><td>False</td><td>Enable recoverable raw cluster in samples test</td></tr-->

        <tr><td>qc.test.project.recoverable.raw.cluster.percent.enable</td><td>boolean</td><td>False</td><td>Enable project recoverable raw cluster percent test</td></tr>
        <tr><td>qc.test.project.recoverable.raw.cluster.percent.interval</td><td>double interval</td><td>Not set</td><td>Interval for valid values</td></tr>

        <!--tr><td>qc.test.recoverablepfcluster.enable</td><td>integer</td><td>False</td><td>Enable recoverable passing filter cluster in samples test</td></tr-->

        <tr><td>qc.test.project.recoverable.pf.cluster.percent.enable</td><td>boolean</td><td>False</td><td>Enable project recoverable passing filter cluster percent test</td></tr>
        <tr><td>qc.test.project.recoverable.pf.cluster.percent.enable</td><td>double interval</td><td>False</td><td>Interval for valid values</td></tr>

        <tr><td>qc.test.project.fastqscreen.sample.overcontamination.count.enable</td><td>boolean</td><td>False</td><td>Enable project FastQ Screen sample overcontamination count test</td></tr>
        <tr><td>qc.test.project.fastqscreen.sample.overcontamination.count.enable</td><td>integer interval</td><td>False</td><td>Integer for valid values</td></tr>

        <tr><td>qc.test.project.fastqscreen.report.enable</td><td>link</td><td>False</td><td>Enable link to detection contamination project report compilation samples data</td></tr>

        <tr><td>qc.test.project.multiqc.report.enable</td><td>link</td><td>False</td><td>Enable link to MultiQC project report</td></tr>
      </table>

      <h4>Optional general configuration</h4>
      <p>User can change property on project test configuration.</p>
      <table>
        <tr><th>Aozan property</th><th>Type</th><th>Default value</th><th>description</th></tr>
        <tr><td>qc.conf.fastqscreen.project.xsl.file</td><td>string</td><td>Not set</td><td>Path to a specific stylesheet file to edit the fastqscreen report html, instead of the file per default</td></tr>
        <tr><td>qc.conf.fastqscreen.project.contamination.percent.threshold</td><td>double</td><td>0.10</td><td>Threshold to count sample with value for test (qc.test.sample.fastqscreen.mapped.percent.enable, mapped read on data set genome contamination.)</td></tr>
        <tr><td>qc.conf.multiqc.use.docker</td><td>boolean</td><td>false</td><td>Use a Docker container to launch MultiQC</td></tr>
	<tr><td>qc.conf.multiqc.docker.image</td><td>string</td><td>ewels/multiqc:v1.11</td><td>Docker image to use</td></tr>
        <tr><td>qc.conf.multiqc.docker.executable</td><td>String</td><td></td><td>Name of the executable to call with a docker image. For the last versions of the official MultiQC Docker image, this value is empty.</td></tr>
      </table>

      <p>An example of table built with projects tests.</p>
      <div align="center">
        <img src="images/qc_project_test.png" alt="example on report with run data" border="1"/>
      </div>

    </section>
  </body>

</document>

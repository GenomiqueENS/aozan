<?xml version="1.0" encoding="UTF-8"?>
<!--
/*
 *                  Aozan development code
 *
 * This code may be freely distributed and modified under the
 * terms of the GNU General Public License version 3 or later
 * and CeCILL. This should be distributed with the code. If you
 * do not have a copy, see:
 *
 *      http://www.gnu.org/licenses/gpl-3.0-standalone.html
 *      http://www.cecill.info/licences/Licence_CeCILL_V2-en.html
 *
 * Copyright for this code is held jointly by the Genomic platform
 * of the Institut de Biologie de l'École Normale Supérieure and
 * the individual authors. These should be listed in @author doc
 * comments.
 *
 * For more information on the Aozan project and its aims,
 * or to join the Aozan Google group, visit the home page at:
 *
 *      http://outils.genomique.biologie.ens.fr/aozan
 *
 */
-->
<document>

  <properties>
    <title>QC samples statistics tests</title>
    <author email="jourdren@biologie.ens.fr">Laurent Jourdren</author>
  </properties>

  <body>

    <section name="Pooled samples quality control tests">

      <p>User can add pooled sample tests to be performed in the QC step which compile sample replica.
      To do this Aozan use the information about samples of a project in the sample sheet.
      The order of the parameters in the Aozan configuration file will be reused in the report generated by this step.
      Each test can use several parameters and contains always an &quot;<b>enable</b>&quot; property to activate the test.
      Usually a property named &quot;<b>interval</b>&quot; exists for each test, however if this property is not set, the value will be computed but not checked if it is the correct interval.</p>

      <p>The pooled sample tests compile technical replica data from the samples tests and other quality control tests (<a href="qc-samples-tests.html#contamination">contamination detection</a> and <a href="qc-samples-tests.html#recoveryclusters">analysis undetermined clusters</a>).
      Please report to those documentation pages for more information.
      You will find below all the parameters for all the available tests in Aozan:</p>

      <h4>Configuration samples statistics quality tests</h4>
      <table>
        <tr><th>Aozan property</th><th>Type</th><th>Default value</th><th>Description</th></tr>
        <tr><td>qc.test.pooledsample.sample.count.enable</td><td>boolean</td><td>False</td><td>Enable sample count test</td></tr>
        <tr><td>qc.test.pooledsample.sample.count.interval</td><td>integer interval</td><td>Not set</td><td>Interval for valid values</td></tr>
        <tr><td>qc.test.pooledsample.genome.names.enable</td><td>string</td><td>False</td> <td>Enable genome names test</td></tr>
        <tr><td>qc.test.pooledsample.min.raw.cluster.count.enable</td><td>boolean</td><td>False</td><td>Enable raw minimum raw cluster count on replica samples</td></tr>
        <tr><td>qc.test.pooledsample.min.raw.cluster.count.interval</td><td>integer interval</td><td>Not set</td><td>Interval for valid values</td></tr>
        <tr><td>qc.test.pooledsample.max.raw.cluster.count.enable</td><td>boolean</td><td>False</td> <td>Enable maximum raw cluster count on replica samples</td></tr>
        <tr><td>qc.test.pooledsample.max.raw.cluster.count.interval</td><td>integer interval</td><td>Not set</td><td>Interval for valid values</td></tr>
        <tr><td>qc.test.pooledsample.raw.cluster.count.enable</td><td>boolean</td><td>False</td> <td>Enable raw cluster count on replica samples</td></tr>
        <tr><td>qc.test.pooledsample.raw.cluster.count.interval</td><td>integer interval</td><td>Not set</td><td>Interval for valid values</td></tr>
        <tr><td>qc.test.pooledsample.min.pf.cluster.count.enable</td><td>boolean</td><td>False</td> <td>Enable minimum passing filter cluster count on replica samples</td></tr>
        <tr><td>qc.test.pooledsample.min.pf.cluster.count.interval</td><td>integer interval</td><td>Not set</td><td>Interval for valid values</td></tr>
        <tr><td>qc.test.pooledsample.max.pf.cluster.count.enable</td><td>boolean</td><td>False</td> <td>Enable maximum passing filter cluster count on replica samples</td></tr>
        <tr><td>qc.test.pooledsample.max.pf.cluster.count.interval</td><td>integer interval</td><td>Not set</td><td>Interval for valid values</td></tr>
        <tr><td>qc.test.pooledsample.pf.cluster.count.enable</td><td>boolean</td><td>False</td> <td>Enable passing filter cluster count on replica samples</td></tr>
        <tr><td>qc.test.pooledsample.pf.cluster.count.interval</td><td>integer interval</td><td>Not set</td><td>Interval for valid values</td></tr>
        <tr><td>qc.test.pooledsample.q30.percent.enable</td><td>boolean</td><td>False</td> <td>Enable Q30 percent test</td></tr>
        <tr><td>qc.test.pooledsample.q30.percent.interval</td><td>interval</td><td>Not set</td> <td>Interval for valid values</td></tr>
        <tr><td>qc.test.pooledsample.pf.percent.enable</td><td>boolean</td><td>False</td> <td>Enable passing filter percent test</td></tr>
        <tr><td>qc.test.pooledsample.pf.percent.interval</td><td>interval</td><td>Not setFalse</td> <td>Interval for valid values</td></tr>
        <tr><td>qc.test.pooledsample.in.run.percent.enable</td><td>boolean</td><td>False</td> <td>Enable in run percent test</td></tr>
        <tr><td>qc.test.pooledsample.in.run.percent.interval</td><td>interval</td><td>Not set</td> <td>Interval for valid values</td></tr>
        <tr><td>qc.test.pooledsample.in.project.percent.enable</td><td>boolean</td><td>False</td> <td>Enable in project percent test</td></tr>
        <tr><td>qc.test.pooledsample.in.project.percent.interval</td><td>interval</td><td>Not set</td> <td>Interval for valid values</td></tr>
        <tr><td>qc.test.pooledsample.sample.in.pool.count.enable</td><td>boolean</td><td>False</td> <td>Enable sample in pool count test</td></tr>
      </table>


      <p>The following tests are only available, if at least one test on <a href="qc-samples-tests.html#recoveryclusters">analysis undetermined clusters from demultiplexing</a> is enabled.</p>

      <table>
        <tr><th>Aozan property</th><th>Type</th><th>Default value</th><th>Description</th></tr>
        <tr><td>qc.test.pooledsample.raw.cluster.recovery.count.enable</td><td>boolean</td><td>False</td> <td>Enable recoverable raw cluster in samples statistics test</td></tr>
        <tr><td>qc.test.pooledsample.raw.cluster.recovery.count.interval</td><td>integer interval</td><td>Not set</td><td>Interval for valid values</td></tr>

        <tr><td>qc.test.pooledsample.recoverable.raw.cluster.percent.enable</td><td>boolean</td><td>False</td> <td>Enable recoverable raw cluster percent in samples statistics test</td></tr>
        <tr><td>qc.test.pooledsample.recoverable.raw.cluster.percent.interval</td><td>double interval</td><td>Not set</td><td>Interval for valid values</td></tr>

        <tr><td>qc.test.pooledsample.pf.cluster.recovery.count.enable</td><td>boolean</td><td>False</td> <td>Enable recoverable passing filter cluster in samples statistics test</td></tr>
        <tr><td>qc.test.pooledsample.pf.cluster.recovery.count.interval</td><td>interger interval</td><td>Not set</td><td>Interval for valid values</td></tr>

        <tr><td>qc.test.pooledsample.recoverable.pf.cluster.percent.enable</td><td>boolean</td><td>False</td><td>Enable recoverable passing filter cluster percent in samples statistics test</td></tr>
        <tr><td>qc.test.pooledsample.recoverable.pf.cluster.percent.interval</td><td>double interval</td><td>Not set</td><td>Interval for valid values</td></tr>
      </table>

      <p>The following tests are only available, if at least one test on <a href="qc-samples-tests.html#contamination">contamination detection with FastQ Screen</a> is enabled.</p>

      <table>
        <tr><th>Aozan property</th><th>Type</th><th>Default value</th><th>Description</th></tr>
        <tr><td>qc.test.pooledsample.fastqscreen.sample.overcontamination.count.enable</td><td>boolean</td><td>False</td><td>Enable FastQ Screen sample overcontamination test</td></tr>
        <tr><td>qc.test.pooledsample.fastqscreen.sample.overcontamination.count.interval</td><td>integer interval</td><td>Not set</td><td>Interval for valid values</td></tr>
        <tr><td>qc.test.pooledsample.fastqscreen.report.enable</td><td>boolean</td><td>False</td><td>Enable a link to the project contamination HTML report</td></tr>
        <tr><td>qc.test.pooledsample.fastqscreen.mapped.except.ref.percent.enable</td><td>boolean</td><td>False</td><td>Enable the percent of reads mapped at least one reference genomes, except on genome sample test</td></tr>
        <tr><td>qc.test.pooledsample.fastqscreen.mapped.percent.enable</td><td>boolean</td><td>False</td><td>Enable the percent of reads mapped at least one reference genomes, except on genome sample test</td></tr>
        <tr><td>qc.test.pooledsample.fastqscreen.mapped.except.ref.percent.interval</td><td>interval</td><td>Not set</td><td>Interval for valid values</td></tr>
      </table>


      <h4>Optional general configuration</h4>
      <p>This options are the same as the <a href="qc-projects-tests.html">optional configuration project tests</a>.</p>

      <p>An example of table built with pooled sample tests.</p>
      <div align="center">
        <img src="images/qc_samplestats_table.png" alt="example on sample statistics table" border="1"/>
      </div>

    </section>
  </body>

</document>

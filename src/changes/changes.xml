<?xml version="1.0" encoding="UTF-8"?>

<document>
	<properties>
		<title>Change log</title>
		<author email="jourdren@biologie.ens.fr">Laurent Jourdren</author>
	</properties>
	<body>

		<release version="0.1" description="Aozan version 0.1" date="2011-12-08">
			<action dev="jourdren" type="update">
				Initial version.
			</action>
		</release>

		<release version="0.2" description="Aozan version 0.2" date="2011-12-09">
			<action dev="jourdren" type="add">
				While a run is running on HiSeq, send the first base report when
				available.
			</action>
		</release>

		<release version="0.3" description="Aozan version 0.3" date="2011-12-09">
			<action dev="jourdren" type="add">
				Add a hiseq.deny file that contains all the run ids to not process.
			</action>
			<action dev="jourdren" type="fix">
				Now save a file with the pid of aozan. Now send a mail with the lock
				error only when the lock pid no more exists.
			</action>
			<action dev="jourdren" type="fix">
				Remove temporary files (design, hiseq_log_ directory).
			</action>
			<action dev="jourdren" type="fix">
				Fix issue when zip design files.
			</action>
		</release>

		<release version="0.4" description="Aozan version 0.4" date="2011-12-09">
			<action dev="jourdren" type="fix">
				Fix issue with pid checking of already running aozan process.
			</action>
		</release>

		<release version="0.5" description="Aozan version 0.5" date="2011-12-12">
			<action dev="jourdren" type="add">
				Aozan has now a log file name aozan.log.
			</action>
			<action dev="jourdren" type="add">
				Trace exception in log file.
			</action>
			<action dev="jourdren" type="fix">
				Issue with pid of currently running instance of Aozan.
			</action>
			<action dev="jourdren" type="fix">
				Now get the good Basecall_Stats_FLOWCELLID path even for RTA 1.10.36.
			</action>
			<action dev="jourdren" type="add">
				Now show in log the new disk usage and disk free at the end of sync
				step and demux step.
			</action>
			<action dev="jourdren" type="fix">
				Demux space estimation.
			</action>
		</release>


		<release version="0.6" description="Aozan version 0.6" date="2011-12-16">
			<action dev="jourdren" type="fix">
				Fix mail message when a run is discovered.
			</action>
			<action dev="jourdren" type="update">
				Don't show Aozan welcome message when there is nothing to do.
			</action>
			<action dev="jourdren" type="fix">
				Change Eoulsan version dependency. Prevent errors with Casava design CSV
				file with comma in cell value.
			</action>
		</release>

		<release version="0.7" description="Aozan version 0.7" date="2012-02-24">
			<action dev="jourdren" type="fix">
				Fix typo in mail message when the end of run is discovered.
			</action>
			<action dev="jourdren" type="update">
				Now use Eoulsan 1.2-SNAPSHOT as dependency. New Casava sample sheet check:
				1) Allow the use of a sample in several lanes; 2) new error if a
				sample is used by more than one project; 3) new warning if a sample
				exists in more than one lane; 4) new warning with the list of line
				where is a sample (if the number of lanes >1); 5) new errors if a sample
				is defined several time by with not the same sequence index.
			</action>
			<action dev="jourdren" type="update">
				In demux step, add Casava design warnings to log and to the success
				mail send to users.
			</action>
			<action dev="jourdren" type="update">
				The default number of threads is now the number of available
				processors/cores.
			</action>
		</release>

		<release version="0.8" description="Aozan version 0.8" date="2012-05-16">
			<action dev="jourdren" type="add">
				Add support for Casava 1.8.2.
			</action>
			<action dev="jourdren" type="add">
				Add Quality control report step.
			</action>
		</release>

		<release version="0.9" description="Aozan version 0.9" date="2012-06-20">
			<action dev="jourdren" type="update">
				When an exception is thrown, send a mail with the exception message and
				traceback.
			</action>
			<action dev="jourdren" type="fix">
				When checking critical space available on HiSeq computer at every Aozan
				startup do not send a message if the HiSeq data path is not
				reachable.
			</action>
			<action dev="jourdren" type="fix">
				In Casava design checking now only allow strings using ascii charset.
			</action>
			<action dev="jourdren" type="fix">
				Aozan qc test do not fail if data to test does not exist.
			</action>
			<action dev="jourdren" type="fix">
				FastQC don't throw exception if no read read.
			</action>
			<action dev="jourdren" type="update">
				No write the qc raw data before the xml qc report.
			</action>
			<action dev="jourdren" type="update">
				If an unexcepted exception is thrown in qc step, now send a mail.
			</action>
		</release>

		<release version="0.10" description="Aozan version 0.10" date="2012-10-08">
			<action dev="jourdren" type="add">
				Jython is now bundled in Aozan.
			</action>
		</release>

		<release version="1.0" description="Aozan version 1.0" date="2013-04-26">
			<action dev="perrin" type="add">
				The quality control step now contains a optional module for assessing sample
				contamination using a re-implementation of FastQ Screen.
			</action>
			<action dev="perrin" type="add">
				Add quality control restoration points to avoid relaunch all the analysis if a fatal error occurs
				before the end.
			</action>
			<action dev="perrin" type="add">
				Now estimate the space needed for the current run and check if enough free space in
				directory for next step is available.
			</action>
			<action dev="perrin" type="add">
				Add a common logger for java and python code.
			</action>
		</release>
		<release version="1.1" description="Aozan version 1.1" date="2013-09-02">
			<action dev="perrin" type="add">
				Add a new module for contamination detection that use partial FASTQ files to reduce
				computation time without lost of information.
			</action>
			<action dev="perrin" type="add">
				Add a collector for reading TileOutMetrics.bin InterOp binary files.
			</action>
			<action dev="perrin" type="add">
				Add a collector for reading ErrorOutMetrics.bin InterOp binary files.
			</action>
			<action dev="perrin" type="add">
				Add a collector for reading ExtractionOutMetrics.bin InterOp binary files.
			</action>
			<action dev="perrin" type="update">
				The contamination detection report is now available in two formats: HTML and
				CSV.
			</action>
			<action dev="perrin" type="add">
				Add contamination detection for paired-end runs. Two modes are available,
				one by mapping only the first read and the other one by mapping both reads.
			</action>
			<action dev="perrin" type="add">
				Add a debug mode in configuration Aozan file.
			</action>
		</release>
		<release version="1.1.1" description="Aozan version 1.1.1"
			date="2013-09-20">
			<action dev="perrin" type="update">
				Aozan now use FastQC 0.10.1.
			</action>
			<action dev="perrin" type="fix">
				Now show values for Undetermined instead of NA.
			</action>
		</release>
		<release version="1.1.2" description="Aozan version 1.1.2"
			date="2013-09-24">
			<action dev="perrin" type="fix">
				Fix missing closing tags in XSL files.
			</action>
		</release>
		<release version="1.1.3" description="Aozan version 1.1.3"
			date="2013-10-14">
			<action dev="perrin" type="fix">
				The change directory to save mapper index can now be set instead of always use /tmp.
			</action>
		</release>
		<release version="1.2" description="Aozan version 1.2" date="2013-12-09">
			<action dev="perrin" type="add">
				Add an optional blast search in the 'Overrepresented Sequences' FastQC module.
				For unidentified sequences, a blastn is launched and the first hit
				is added in the FastQC report.
			</action>
			<action dev="perrin" type="add">
				In Aozan configuration several FastQC parameters can now be set:
				a file with list of contaminants, the kmers size and if each cycles values
				must be displayed.
			</action>
			<action dev="perrin" type="update">
				In the CASAVA/bcl2fastq samplesheet validator, add a tab to check genome
				sample.
			</action>
			<action dev="jourdren" type="add">
				Add an HiSeq data continuous synchronization mode.
			</action>
			<action dev="perrin" type="add">
				Formatter file rules for eclipse or other IDE can be download on
				code.google.com Aozan site.
			</action>
		</release>

		<release version="1.2.1" description="Aozan version 1.2.1"
			date="2014-01-17">
			<action dev="perrin" type="add">
				Homogeization of the configuration settings names. Now use the new Settings class
				to retrieve a configuration value.
			</action>
			<action dev="perrin" type="update">
				In the test on demultiplexing
				data 'percentinlanesample', add a score that depends of the sample count in the
				lane.
			</action>
			<action dev="perrin" type="update">
				Update Guava library version dependency from 14.0.1 to 15.1.
			</action>
		</release>

		<release version="1.2.2" description="Aozan version 1.2.2"
			date="2014-01-28">
			<action dev="perrin" type="fix">
				The mapping for contamination detection was launched in mono-thread mode.
			</action>
		</release>


		<release version="1.2.3" description="Aozan version 1.2.3"
			date="2014-03-11">
			<action dev="perrin" type="fix">
				The alias genome names file used by FastQScreen is updated and no more rewritten.
			</action>
			<action dev="perrin" type="add">
				Now check main parameters from configuration before starting Aozan.
			</action>
			<action dev="perrin" type="fix">
				Launching steps when synchronization step is skipped without entry in infinite loop.
				The useful directory and archives for next steps are been created.
			</action>
			<action dev="perrin" type="fix">
				The QC report is now generated only if one &apos;qc.test&apos; is enabled. Useful collectors are automatically called.
			</action>
			<action dev="jourdren" type="fix">
				The &apos;From&apos; field header in emails sent by Aozan was not set.
			</action>

		</release>

		<release version="1.2.4" description="Aozan version 1.2.4"
			date="2014-03-14">
			<action dev="jourdren" type="fix">
				When check main paths in configuration, the paths are no more converted to lower case.
			</action>
			<action dev="jourdren" type="update">
				Add setting for bcl2fastq/casava compression format (.bz2, .gz, none, bzip2, gz, gzip).
			</action>
			<action dev="perrin" type="fix">
			    Remove blast database prefix configuration setting.
			</action>
		</release>

		<release version="1.2.5" description="Aozan version 1.2.5"
			date="2014-04-04">
			<action dev="perrin" type="fix">
				Now check aozan configuration file at the beginning. Sends an email if fails.
			</action>
		</release>

		<release version="1.2.6" description="Aozan version 1.2.6"
			date="2014-05-06">
			<action dev="perrin" type="fix">
				Now check if FASTQ files are not empty before creating partial FASTQ files used by FastqScreen for contamination detection.
			</action>
		</release>
		<release version="1.2.7" description="Aozan version 1.2.7"
			date="2014-09-01">
			<action dev="perrin" type="update">
				Aozan now requires Java 7 and use samtools/picard 1.92 as dependency.
			</action>
			<action dev="perrin" type="fix">
				Update email sending code. Now the email date is already set.
			</action>
			<action dev="perrin" type="update">
				Compute phasing and prephasing values with RTA v1.18. Ignore null tiles metric values in Interop file.
			</action>
			<action dev="perrin" type="add">
				Add a new web page to explain how to create a plugin for Aozan.
			</action>
		</release>
		<release version="1.2.8" description="Aozan version 1.2.8"
			date="2014-09-11">
			<action dev="perrin" type="fix">
				Fix compute phasing and prephasing values from tiles metric Interop file. Multiply by 100 values to get the same values as before v1.2.7.
			</action>
			<action dev="perrin" type="fix">
				Fix indentation in html report. Fix display error for lines > 1000 characters when processed by some mail server.
			</action>
		</release>

		<release version="1.3" description="Aozan version 1.3"	date="2014-10-16">
			<action dev="jourdren" type="add">
				Add global tests to the QC step. This new type of test comes with some global tests.
			</action>
			<action dev="jourdren" type="add">
			    Aozan now provide a QC module that analyzes indices of reads in the undetermined FASTQ files.
			    For each indices, this module suggest the sample(s) and the number of reads that can be recovered using a demultiplexing
			    step with one more mismatch that the number of mismatches has been used.
				This module create two reports: one per indexed lanes and one per indexed samples, both in CVS and HTML format.
			</action>
			<action dev="sperrin" type="add">
				Add two parameters in the Aozan configuration to run FastQC and contaminants detection on undetermined FASTQ files.
			</action>
			<action dev="sperrin" type="add">
				Add a new "include" directive in Aozan configuration file. With this enhancement it will be easier to use
				Aozan in a multi-servers context using the same core configuration file by all Aozan instances.
			</action>
			<action dev="sperrin" type="update">
				Aozan now use blastn from ncbi-blast+ in addition of blastall.
			</action>
			<action dev="sperrin" type="update">
				Aozan use now FastQC 0.11.2 which has been enhanced like previous Aozan version (bad tiles modules, blastn in Overrepresented sequences modules).
			</action>
			<action dev="sperrin" type="update">
				Aozan can now use the bowtie 2 mapper in FastqScreen step. The default mapper used in Aozan still bowtie 1.
			</action>
			<action dev="sperrin" type="update">
				Update the control quality report with a table for global tests.
				Add button to filter by project name displayed samples in the QC report.
			</action>
			<action dev="sperrin" type="add">
				Aozan now use Eoulsan 2.0-alpha1 as dependency. A bug in this new Eoulsan version forces us to add amazonaws library as Aozan dependancy.
				This amazonaws dependency will be remove once Aozan will use a fixed version of Eoulsan.
			</action>
		</release>
		<release version="1.3.1" description="Aozan 1.3.1 release" date="2014-12-12">
			<action dev="sperrin" type="add">
				Add two samples tests on recovery cluster modules to get percent on raw and passing filter recovery clusters.
			</action>
			<action dev="sperrin" type="add">
				Aozan now use Maven 3 for building binaries and website.
			</action>
			<action dev="sperrin" type="fix">
				Global test UndeterminedClustersPercentGlobalTest, now ignore not indexed lane.
			</action>
			<action dev="sperrin" type="update">
				QC global report, now button project filter by lane.
			</action>
			<action dev="sperrin" type="update">
				Update dependancies in pom.xml : 1) now use Eoulsan-2.0-alpha3, 2) remove dependency to aws-java-sdk
				only usefully with Eoulsan version 2.0-alpha1
			</action>
		</release>

		<release version="1.3.2" description="Aozan 1.3.2 release" date="2014-12-30">
			<action dev="sperrin" type="fix">
				Global test UndeterminedClustersPercentGlobalTest, fix compute percent.
			</action>
		</release>

		<release version="1.4" description="Aozan 1.4 release"  date="2015-03-05">
			<action dev="jourdren" type="add">
				Add lock file for each run at each step in context with several instance of Aozan running.
			</action>
			<action dev="sperrin" type="add">
				Add detection contamination project report in HTML, compile data from samples.
			</action>
			<action dev="sperrin" type="fix">
				Fix read collector on InterOp, now it can treat run with multindexes or run without index.
			</action>
			<action dev="sperrin" type="update">
				Archive on run, now is create after the detection run step instead of synchronization step.
			</action>
			<action dev="sperrin" type="add">
				Aozan now use Eoulsan 2.0-alpha5 as dependency.
			</action>
			<action dev="sperrin" type="add">
				Add project tests to the QC step. This new type of test comes with some project tests.
			</action>
		</release>

		<release version="1.4.1" description="Aozan 1.4.1 release"  date="2015-03-19">
			<action dev="jourdren" type="fix">
				Fix action to create of lock file on each step.
			</action>
			<action dev="sperrin" type="update">
				Example on final quality control report, add table on project.
			</action>
			<action dev="sperrin" type="add">
				Change default logger level, replace INFO by CONF.
			</action>
			<action dev="sperrin" type="update">
				In detection contamination project report, add lane number with sample name (case technical replicates),
				can be manage project with several genome.
			</action>
			<action dev="sperrin" type="fix">
				Now ProjectStatsCollector don't require UndeterminedIndexesCollector and FastqScreenCollector.
				Only if they are required for QC step, it can use data to compute related statistics.
			</action>
			<action dev="jourdren" type="update">
				The official Aozan Git repository is now GitHub instead of Google code.
			</action>
		</release>

		<release version="1.4.2" description="Aozan 1.4.2 release"  date="2015-04-14">
			<action dev="jourdren" type="add">
				New dependency for errorprone static code analysis tool execution each time mvn compile is called.
			</action>
			<action dev="sperrin" type="update">
				Update detection contaminant project report.
			</action>
			<action dev="sperrin" type="fix">
				With PE run, now all statistical data in quality control report are display, no more NA.
			</action>
		</release>

		<release version="1.5" description="Aozan 1.5 release"  date="2015-04-29">
			<action dev="sperrin" type="add">
				New dependency on FastQC version 0.11.3, publish 25/03/2015.
			</action>
			<action dev="sperrin" type="fix">
				The ProjectStatCollector can now collect data on recovery on undetermined reads when a lane is no indexed,
				the control quality report displays NA for this lane.
			</action>
		</release>

		<release version="2.0-rc1" description="Aozan 2.0-rc1 release"  date="2015-10-01">
			<action dev="sperrin" type="add">
				Now Aozan can manager HiSeq and NextSeq sequencer at the same time.
			</action>
			<action dev="sperrin" type="add">
				Now Aozan can manager futhermore bcl2fastq2 and new version on sample sheet file.
			</action>
			<action dev="sperrin" type="add">
				Now Aozan can run the demultiplexing step with Docker images on bcl2fastq 1 or 2.
			</action>
			<action dev="sperrin" type="add">
				The final quality control report includes a sample statistic table to compile data on technical replica
				if the run contains only one project name.
			</action>
		</release>

		<release version="2.0-rc2" description="Aozan 2.0-rc2 release"  date="2015-10-29">
			<action dev="jourdren" type="update">
				Replace the implementation of the SampleSheet classes by a new one.
			</action>
			<action dev="jourdren" type="fix">
				Many refactoring in Java and Python code.
			</action>
			<action dev="jourdren" type="fix">
				Many small fixes.
			</action>
		</release>

		<release version="2.0-rc3" description="Aozan 2.0-rc3 release"  date="2015-10-29">
			<action dev="jourdren" type="fix">
				In estimate_space_needed.py, Python hiseq module was not loaded.
			</action>
			<action dev="jourdren" type="fix">
				Fix changes.xml XML.
			</action>
		</release>

		<release version="2.0-rc4" description="Aozan 2.0-rc4 release"  date="2015-10-29">
			<action dev="jourdren" type="fix">
				In estimate_space_needed.py, Python hiseq_run module was not loaded (not hiseq module !!!).
			</action>
		</release>

		<release version="2.0-rc5" description="Aozan 2.0-rc5 release"  date="2015-10-31">
			<action dev="jourdren" type="fix">
				Do not search for undetermined fastq files in lanes where there is only one sample without index.
			</action>
			<action dev="jourdren" type="fix">
				Bcl2fastq 2 output is bugged: Read number attritute in ConversionStats.xml is random for the first read when no index is set in the lane.
			</action>
			<action dev="jourdren" type="fix">
				Update Illumina FASTQ header parser to allow headers with index that are not a nucleotide sequence.
			</action>
			<action dev="jourdren" type="fix">
				Several fixes to avoid craches when no undetermined FASTQ exists when collect data or process tests in the QC step.
			</action>
		</release>

		<release version="2.0-rc6" description="Aozan 2.0-rc6 release"  date="2015-11-01">
			<action dev="jourdren" type="fix">
				Fix FASTQ filename creation from samplesheet for bcl2fastq 2 output.
			</action>
			<action dev="jourdren" type="fix">
				Fix NullPointerException when no genome reference is defined for sample..
			</action>
			<action dev="jourdren" type="fix">
				For clusting recovering, do not process undetermined Illumina sequences without index nucleotide sequence in FASTQ header.
			</action>
		</release>

		<release version="2.0-rc7" description="Aozan 2.0-rc7 release"  date="2015-11-03">
			<action dev="jourdren" type="update">
				In the Sample class, rename getProject() to getSampleProject() and isProjectField() to isSampleProjectField().
			</action>
			<action dev="jourdren" type="update">
				For debugging, save a snapshot of the run data information after the end of each collector.
			</action>
		</release>

		<release version="2.0-rc8" description="Aozan 2.0-rc8 release"  date="2015-11-17">
			<action dev="jourdren" type="update">
				The detection of the samplesheet V1 header is now case insensible and existing '_' characters are removed for the detection.
			</action>
			<action dev="jourdren" type="fix">
				Now don't check RTA version of the run to avoid reading the runParameter.xml file when it has not been created while synchronizing runs.
			</action>
		</release>

		<release version="2.0-rc9" description="Aozan 2.0-rc9 release"  date="2015-11-18">
			<action dev="jourdren" type="update">
				Remove synchronization of runs that had just finished after the end of each step. This feature is now unnecessary with the partial synchronization feature.
			</action>
		</release>

		<release version="2.0-rc10" description="Aozan 2.0-rc10 release"  date="2016-01-06">
			<action dev="jourdren" type="fix">
                                When several qc analysis must be done, the configuration of the first qc when used for the other qc analysis.
			</action>
			<action dev="jourdren" type="fix">
                                In FastQC blasts of overrepresented sequences, due to concurency issue, multiple blast instances could be executed at the same time.
			</action>
			<action dev="jourdren" type="fix">
                                Fix tar warning message on stderr in the demux step.
			</action>
			<action dev="jourdren" type="update">
                                Many Java code refactoring and dead code removing.
			</action>
			<action dev="jourdren" type="update">
                                Rename packages fr.ens.transcriptome.aozan.* to fr.ens.biologie.genomique.aozan.* as the new website of the ENS genomic platform is https://genomique.biologie.ens.fr.
                                Update the URL of the website to http://outils.genomique.biologie.ens.fr/aozan.
			</action>
			<action dev="jourdren" type="update">
                                The encoding of the website is now UTF-8.
			</action>
			<action dev="jourdren" type="update">
                                Many small code and javadoc fixes after running IDEA inspect tool.
			</action>
		</release>

		<release version="2.0-rc11" description="Aozan 2.0-rc11 release"  date="2016-01-27">
			<action dev="jourdren" type="fix">
                                Do not send an email if the first base report does not yet exist for RTA 1 output.
			</action>
			<action dev="jourdren" type="fix">
                                 In the meanqualityscorepfsamplestats and samplestatspercentq30basepf tests, a NullPointerException was thrown if a sample does not exists in all the lane of the run.
			</action>
		</release>

		<release version="2.0-rc12" description="Aozan 2.0-rc12 release"  date="2016-02-01">
			<action dev="jourdren" type="fix">
                                 In the percentsampleinproject and samplestatsfsqmapped tests, a NullPointerException was thrown if a sample does not exists in all the lane of the run.
			</action>
		</release>

		<release version="2.0-rc13" description="Aozan 2.0-rc13 release"  date="2016-04-05">
			<action dev="jourdren" type="fix">
                                 The QC step now support dual indexing.
			</action>
			<action dev="jourdren" type="update">
                                 Aozan now use Eoulsan 2.0-beta3 and htsjdk 1.118.
			</action>
			<action dev="jourdren" type="update">
                                 The new Aozan website URL is http://outils.genomic.biologie.ens.fr/aozan and the new Genomic platform website is https://genomique.biologie.ens.fr.
			</action>
		</release>

		<release version="2.0-rc14" description="Aozan 2.0-rc14 release"  date="2016-07-04">
			<action dev="jourdren" type="update">
                                 The user can now define the number of mismatches of barcode for bcl2fastq in the samplesheet using the "MismatchCount" value of the "Settings" section.
			</action>
			<action dev="jourdren" type="update">
                                 The file with all QC data is now renamed from data-RUN_ID.txt to RUN_ID.data.
			</action>
			<action dev="jourdren" type="update">
                                 Remove bcl2fastq 1.x support.
			</action>
			<action dev="jourdren" type="update">
                                 Replace all occurences of "casava" by "bcl2fastq".
			</action>
			<action dev="jourdren" type="update">
                                 Remplace all occurences of "design" by "samplesheet".
			</action>
			<action dev="jourdren" type="update">
                                 In QC, rename all data entries starting with "design." by "samplesheet.".
			</action>
			<action dev="jourdren" type="update">
                                 Add a prefix for data of all ReadCollector entries.
			</action>
			<action dev="jourdren" type="update">
                                 Remove "HiSeq" and "NextSeq" strings from all Aozan messages, use instead the family name of the sequencer and its serial number.
			</action>
			<action dev="jourdren" type="update">
                                 Force use LANG=C environment variable in aozan.sh.
			</action>
			<action dev="jourdren" type="update">
                                 The emails are now sent in UTF8.
			</action>
			<action dev="jourdren" type="update">
                                 In OverrepresentedSequencesBlast, several blast are now performed at each execution of blast.
			</action>
			<action dev="jourdren" type="update">
                                 Reorganize GenomeAliases class code.
			</action>
		</release>

		<release version="2.0-rc15" description="Aozan 2.0-rc15 release"  date="2016-07-11">
			<action dev="jourdren" type="update">
                                 FastQC 0.11.5 is now embedded in Aozan.
			</action>
			<action dev="jourdren" type="fix">
                                 The 'qc.conf.threads' configuration settings value now works for Fastq-screen.
			</action>
			<action dev="jourdren" type="fix">
                                 The Eoulsan configuration needed by FastqScreen is now only set when FastqScreen is enabled. If a setting is required by FastqScreen is not set, an error message is now thrown.
			</action>
			<action dev="jourdren" type="fix">
                                 The subject message of the email sent when a new run is detected now contains the correct number of the run cycles.
			</action>
			<action dev="jourdren" type="fix">
                                 The choice of the FASTQ file compression level is now (re)working.
			</action>
			<action dev="jourdren" type="fix">
                                 The additional arguments of bcl2fastq were not correctly handled.
			</action>
			<action dev="jourdren" type="fix">
                                 The FastqScreen now works when the FASTQ files are empty.
			</action>
			<action dev="jourdren" type="fix">
                                 The genome aliases for FastqScreen were not correctly loaded.
			</action>
			<action dev="jourdren" type="fix">
                                 Fix exception in FastQC when few reads are processed.
			</action>
			<action dev="jourdren" type="fix">
                                 Fix exception in undetermined collector when few reads are processed.
			</action>
		</release>

		<release version="2.0-rc16" description="Aozan 2.0-rc16 release"  date="2016-07-14">
			<action dev="firmo" type="add">
                                 Add 2 new tests to show Q30 of the run lanes and of all the run.
			</action>
			<action dev="jourdren" type="fix">
                                 In FastQC report for overrepresented sequences, the blast message was a Java reference instead of the real blast result message.
			</action>
		</release>

		<release version="2.0-rc17" description="Aozan 2.0-rc17 release"  date="2016-08-23">
			<action dev="jourdren" type="update">
                                 Reorganize key names in RunData to use an id for each sample/pooledsample/project instead of their name.
			</action>
			<action dev="jourdren" type="update">
                                 All the tests configuration keys are now prefixed with its type (lane, sample, project, global and samplestats).
			</action>
			<action dev="jourdren" type="fix">
                                 All the files in the report directory have now the 755 permissions.
			</action>
			<action dev="jourdren" type="update">
                                 When the samplesheet is not generated by an external tool, Aozan can now use the SampleSheet.csv file as samplesheet if no other samplesheet is provided by the user.
			</action>
			<action dev="jourdren" type="update">
                                 The samplesheet in the FASTQ output directory is now always named "SampleSheet.csv".
			</action>
			<action dev="firmo" type="fix">
                                 The Phasing and Prephasing calculations from Aozan are now similar to Illumina calculations.
			</action>
			<action dev="firmo" type="update">
                                 Aozan JUnit tests have now migrated from JUnit 3 to JUnit 4.11 .
			</action>
			<action dev="firmo" type="add">
                                 Can now set prioritized runs using the "runs.priority" file.
			</action>
			<action dev="firmo" type="add">
                                 Can now deny runs from performing an Aozan test using the "*.deny" file.
			</action>
			<action dev="firmo" type="update">
                                 The "*.done" files telling which run succesfully finished a step are now locked and protected from multiple process trying to modify these files simultaneously.
			</action>
			<action dev="firmo" type="add">
                                 new test giving sum of pooled samples used.
			</action>
			<action dev="firmo" type="update">
                                 Fully renamed tests, doc and classes associated with qc-tests.
			</action>
			<action dev="firmo" type="add">
                                 Samplesheet files can now also be in XLSX format.
			</action>
			<action dev="jourdren" type="update">
                                 Rename Sample stats section to Pooled samples.
			</action>
			<action dev="jourdren" type="update">
                                 Rename many "qc.conf.*" keys.
			</action>
			<action dev="jourdren" type="update">
                                 Update the "writing a plugin" section of the documentation with the latest version of the API of Aozan.
			</action>
			<action dev="jourdren" type="update">
                                 Update and reorganize the configuration example.
			</action>
		</release>

		<release version="2.0-rc18" description="Aozan 2.0-rc18 release"  date="2016-08-25">
			<action dev="jourdren" type="fix">
                                 Entries in done files were written with the 2 byte of the Byte order mark.
			</action>
			<action dev="jourdren" type="fix">
                                 Fix some typos in email messages.
			</action>
			<action dev="jourdren" type="fix">
                                 When a configuration key related to a path key did not exist, an exception was thrown when checking the path existance.
			</action>
			<action dev="jourdren" type="fix">
                                 The default compression level value was not set for the right configuration key.
			</action>
			<action dev="jourdren" type="fix">
                                 In detection_end_run.discover_terminated_runs(), do not raise an exception when create_run_summary_reports() failed because an error message has been already sent..
			</action>
			<action dev="jourdren" type="fix">
                                 The samplesheet in XLSX format are now also saved in the zip archive.
			</action>
			<action dev="jourdren" type="fix">
                                 Fix non-existing variable Python error when archiving samplesheet.
			</action>
			<action dev="jourdren" type="fix">
                                 In demux step, the temporary samplesheet file used by bcl2fastq was removed twice.
			</action>
			<action dev="jourdren" type="update">
                                 At startup of aozan.aozan_main(), now check if the configuration file exists..
			</action>
			<action dev="firmo" type="add">
                                 Added recompression step.
			</action>
		</release>

		<release version="2.0-rc19" description="Aozan 2.0-rc19 release"  date="2016-10-03">
			<action dev="jourdren" type="fix">
                                 Fix issue when using old configuration keys in upper case.
			</action>
			<action dev="jourdren" type="fix">
                                 Fix issue when parsing intervals for QC tests in configuration file.
			</action>
			<action dev="jourdren" type="fix">
                                 Fix missing collector dependencies of some QC tests.
			</action>
			<action dev="jourdren" type="fix">
                                 Aozan can now handle FASTQ files for QC when samples of a project are in a dedicated subdirectory directory of the project directory.
			</action>
			<action dev="jourdren" type="fix">
                                 Fix missing collector dependencies of some QC tests.
			</action>
			<action dev="jourdren" type="fix">
                                 Fix issue with sample in upper case in the demultiplexing collector in QC.
			</action>
			<action dev="firmo" type="fix">
                                 Fixed errors when samples in the samplesheet were unsorted.
			</action>
			<action dev="firmo" type="fix">
                                 Fixed some typo in aozan error messages.
			</action>
			<action dev="firmo" type="fix">
                                 Fixed errors when converting samplesheet to CSV leave empty column.
			</action>
			<action dev="jourdren" type="fix">
                                 Fix Aozan can now handle FASTQ files that are in a sample subdirectory generated by Bcl2fastq.
			</action>
			<action dev="jourdren" type="fix">
                                 When the value of a setting entry in the configuration was empty, an error was thrown.
			</action>
			<action dev="jourdren" type="fix">
                                 The version of bcl2fastq was read from the right log file in QC step.
			</action>
			<action dev="firmo" type="add">
                                 Parameter files for failed runs are now also archived.
			</action>
			<action dev="jourdren" type="update">
                                 Docker can now be used to launch Blast in the Overrepresented sequences module of FastQC.
			</action>
			<action dev="jourdren" type="add">
                                 Add a script that allows to create an Aozan demo configuration file and downloads all required files.
			</action>
			<action dev="firmo" type="add">
                                 Now checks if system is linux type.
			</action>
			<action dev="firmo" type="add">
                                 Now checks if programs are availables in PATH before execution.
			</action>
			<action dev="firmo" type="update">
                                 Can now provide samplesheets xls where field contains ',' character.
			</action>
			<action dev="firmo" type="update">
                                 When bcl2fastq execution fails, send error log attached in mail.
			</action>
			<action dev="firmo" type="update">
                                 Now supports bcl2fastq 2.18.
			</action>
			<action dev="jourdren" type="update">
                                 Update the QC demo example.
			</action>
			<action dev="jourdren" type="update">
                                 The change of the rights of output files to read only can now be disabled using the "read.only.output.files" configuration property.
			</action>
		</release>

		<release version="2.0-rc20" description="Aozan 2.0-rc20 release"  date="2016-10-28">
			<action dev="jourdren" type="fix">
                                 Fix some Java 8 compilation errors.
			</action>
			<action dev="jourdren" type="fix">
                                 The sample id in the FASTQ filenames was not corretly sometimes guessed.
			</action>
			<action dev="jourdren" type="fix">
                                 For large FASTQ files, the FastQC report was not generated.
			</action>
			<action dev="jourdren" type="fix">
                                 Fix error when parsing an empty PID file.
			</action>
			<action dev="jourdren" type="fix">
                                 When the "qc.conf.threads" configuration property is not set, now use all available cores to launch FastQ Screen.
			</action>
			<action dev="jourdren" type="fix">
                                 The key results generated by ConversionStatsCollector with bcl2fastq 2.16 was not the same as with bcl2fastq 2.18.
			</action>
			<action dev="jourdren" type="update">
                                 The default amount of memory allocated by Aozan is now 4096 instead of 2048MiB.
			</action>
			<action dev="jourdren" type="update">
                                 Update documentation.
			</action>
		</release>

		<release version="2.0" description="Aozan 2.0 release"  date="2017-02-14">
			<action dev="jourdren" type="fix">
                                 Spaces, simple and double quotes can now be used in paths to the Aozan input and output files.
			</action>
                        <action dev="jourdren" type="fix">
                                 Fix NullPointerException when process undetermined samples in RecoverableRawClusterPercentSampleTest.
			</action>
			<action dev="jourdren" type="update">
                                 StartTTLS, SSL, and login/password can now be used to configure the connection to the SMTP server to send emails.
			</action>
			<action dev="jourdren" type="update">
                                 The FastQC and Fastq Screen reports have now the same prefix as the FASTQ files.
			</action>
			<action dev="jourdren" type="add">
                                 Add two new configuration property to unzip and/or remove FastQC Zip report file.
			</action>
			<action dev="jourdren" type="update">
                                 Aozan now use Eoulsan 2.0-beta4 as dependency.
			</action>
			<action dev="jourdren" type="add">
                                 Aozan now supports Illumina HiSeq 3/4000 and HiSeq X.
			</action>
		</release>

		<release version="2.1" description="Aozan 2.1 release"  date="2017-11-08">
			<action dev="jourdren" type="fix">
                                 Aozan now thrown an error if an empty string is used for the number mismatches in the settings.
			</action>
			<action dev="jourdren" type="fix">
                                 Fix unknown variable error while creating error message while demultiplexing.
			</action>
			<action dev="jourdren" type="fix">
                                 Fix issue of Fastq Screen when mapping very small FASTQ files.
			</action>
			<action dev="jourdren" type="fix">
                                 Aozan now works with MiSeq flowcell ids.
			</action>
			<action dev="jourdren" type="fix">
                                 In some cases, Aozan did not guest the correct sample number for FASTQ filenames generated by bcl2fastq.
			</action>
			<action dev="jourdren" type="fix">
                                 In FastQScreen mapped percentage test, the sample genome reference name was used as key instead the real genome reference name obtained using the genome alias.
			</action>
			<action dev="jourdren" type="fix">
                                 When replacing index shortcuts in samplesheet by real sequences, index1 was processed instead of index2.
			</action>
			<action dev="jourdren" type="fix">
                                 When launching FastQScreen on very small FASTQ file, Aozan stalled.
			</action>
			<action dev="jourdren" type="add">
                                 Add a new demux.archive.samplesheets option in Aozan configuration file to avoid samplesheets archiving.
			</action>
			<action dev="jourdren" type="add">
                                 Now throw a warning when a index 2 field exists and not index 1 field in samplesheet.
			</action>
		</release>

		<release version="2.1.1" description="Aozan 2.1.1 release"  date="2017-11-23">
			<action dev="jourdren" type="fix">
                                 When a genome alias was used as reference genome for FastQScreen, the mapping of the reads was not performed.
			</action>
		</release>

		<release version="2.2" description="Aozan 2.2 release"  date="2017-12-10">
			<action dev="jourdren" type="fix">
                                 In paired-end mode, the links in the main report to FastQC reports were null.
			</action>
			<action dev="jourdren" type="fix">
                                 Fix NullPointerException in Fastq Screen collector when no sample reference was defined in the samplesheet.
			</action>
			<action dev="jourdren" type="fix">
                                 Fix error when accessing to genome alias names and the Fastq Screen collector was not enabled.
			</action>
			<action dev="jourdren" type="fix">
                                 The gathering of cluster recovering counts in EntityStat is now not made if dual indexing is enabled because the recovery cluster collector does not work with dual indexing.
			</action>
			<action dev="jourdren" type="fix">
                                 Fix the order of the Fastq Screen genome tests in the report.
			</action>
			<action dev="jourdren" type="add">
                                 Add a MultiQC collector and project test. MultiQC will use Bcl2fastq stats, FastQC and Fastq Screen data.
			</action>
		</release>

		<release version="2.2.1" description="Aozan 2.2.1 release"  date="2017-12-21">
			<action dev="jourdren" type="fix">
                                 The entry for FastQ Screen report path for read 2 in paired-end mode was not exists.
			</action>
			<action dev="jourdren" type="fix">
                                 The genome alias file was not updated when an unknown genome name was added.
			</action>
		</release>
	
		<release version="3.0" description="Aozan 3.0 release"  date="2023-04-28">
			<action dev="jourdren" type="add">
                                 Rewrite all the Python code in Java.
			</action>
			<action dev="jourdren" type="add">
                                 Add support of NextSeq 1000/2000.
			</action>
			<action dev="jourdren" type="add">
                                 Add support of BCL convert in addition to Bcl2fastq.
			</action>
			<action dev="jourdren" type="add">
                                 Aozan can execute actions. If no action name is defined on command line, Aozan 3.x will work as Aozan 2.x.
			</action>
			<action dev="jourdren" type="add">
                                 A new configuration setting allow to trim reads to a maximal length when launching Fastq Screen collector.
			</action>
			<action dev="jourdren" type="add">
                                 Add new tests: OccupancyPercentGlobalTest and GenomeNamesSampleTest.
			</action>
			<action dev="jourdren" type="add">
                                 Add PrimaryAnalysisMetricsCollector and a new global test for loading concentration percent.
			</action>
			<action dev="jourdren" type="update">
                                 Now depends on the kenetre libraries instead of Eoulsan. Some Aozan code (e.g. InterOP files parsing) has been moved to Kenetre.
			</action>
			<action dev="jourdren" type="update">
                                 Aozan now requires Java 11 at runtime and for compilation.
			</action>
			<action dev="jourdren" type="update">
                                 Replace "Genomic Paris Centre" by "GenomiqueENS" as the IBENS genomics core facility has changed its name.
			</action>
			<action dev="jourdren" type="update">
                                 Aozan now requires Apache POI 4.1.2 instead of 3.12.
			</action>
			<action dev="jourdren" type="update">
                                 If execute MultiQC in Docker mode, now use the MultiQC 1.12 Docker image by default.
			</action>
			<action dev="jourdren" type="update">
                                 Update DemultiplexStatsCollector to handle both Demultiplex_Stats.csv and Quality_Metrics.csv file with BCL-Convert >=3.9.
			</action>
			<action dev="jourdren" type="update">
                                 In IlluminaSamplesheetRunConfigurationProvider, now replace underscores in sample ids by dashes. This option is enabled by default. The "samplesheet.allow.underscores.in.sample.ids" allow to disable it.
			</action>
			<action dev="jourdren" type="update">
                                 Now before launching BCL convert, move forbidden fields of the BCLConvert_Data section of the samplesheet in an other section. In Aozan2QC step, if this other section exists, merge the section in the original section.
			</action>
			<action dev="jourdren" type="update">
                                 Aozan 2 QC Now use FastQC 11.9.
			</action>
			<action dev="jourdren" type="fix">
                                 In Fastq Screen TSV output file, the name of the last column was missing. Update column names in this file to names used in the latest versions of Fastq screen.
			</action>
			<action dev="jourdren" type="fix">
                                 In OverrepresentedSequencesBlast class, fix issue that enable blast even if blast command is not available.
			</action>
			<action dev="jourdren" type="fix">
                                 In OverrepresentedSequencesBlast, now use a the SAX API instead of the DOM API to parse blast XML result file. When a large XML output file is produced, an OutOfMemoryError error could occurs.
			</action>
		</release>

		<release version="3.0.1" description="Aozan 3.0.1 release"  date="2023-05-24">
			<action dev="jourdren" type="fix">
                                 Fix SMTP configuration with StartTTLS, SSL and login/password.
			</action>
		</release>

		<release version="3.0.2" description="Aozan 3.0.2 release"  date="2023-07-07">
			<action dev="jourdren" type="fix">
                                 Fix issue for demultiplexing without using Docker.
			</action>
		</release>

		<release version="3.1" description="Aozan 3.1 release"  date="2024-04-25">
			<action dev="jourdren" type="add">
                                 Blast can be disabled for the "Overrepresented sequences" of the FastQC report if an "Aozan" section with a "disable.blast" is set to true in the samplesheet of the run.
			</action>
			<action dev="jourdren" type="add">
                                 Add a new configuration option named "qc.report.tests.to.remove.in.basic.report" that allow to create an additional HTML report but without some tests of the main report.
			</action>
			<action dev="jourdren" type="add">
                                 Add a new configuration parameter "samplesheet.allow.sample.ids.max.length" that allow to disable maximal sample ID length at 20 characters.
			</action>
			<action dev="jourdren" type="add">
                                 User can now define template emails for the emails sent at the end of a step.
			</action>
			<action dev="jourdren" type="add">
                                 Add a new option in legacy mode named "aozan.log.start.stop" that log the startup and the shutdown of Aozan. This option is disabled by default.
			</action>
			<action dev="jourdren" type="update">
                                 Exec and list action are now hidden util there are not stable.
			</action>
			<action dev="jourdren" type="update">
                                 Aozan now use Kenetre 0.25 has dependency.
			</action>
			<action dev="jourdren" type="update">
                                 When using BCL Convert in Docker mode, set default version to 4.2.7.
			</action>
			<action dev="jourdren" type="update">
                                 Since NextSeq Software 1.7.0 in PrimaryAnalysisMetrics.csv file, the "Average %Q30" metric has been renamed to "≥ Q30". Aozan has been updated to handle this.
			</action>
			<action dev="jourdren" type="update">
                                 Now allow samplesheets with name like samplesheet_SERIALNUMBER_0086.xls or samplesheet_SERIALNUMBER_86.xls.
			</action>
			<action dev="jourdren" type="fix">
                                 Some MiSeq outputs were not handled by Aozan.
			</action>
			<action dev="jourdren" type="fix">
                                 The configuration "mail.header" and "mail.footer" parameter were not handled in legacy mode.
			</action>
			<action dev="jourdren" type="fix">
                                 In Illumina samplesheets, discard blank fields in data sections.
			</action>
			<action dev="jourdren" type="fix">
                                 Existing BOM character at the beginning of Illumina samplesheets in CVS format are now handled.
			</action>
			<action dev="jourdren" type="fix">
                                 Fix MiSeq run discovery.
			</action>
		</release>

		<release version="3.1.1" description="Aozan 3.1 release"  date="TBD">
			<action dev="jourdren" type="update">
                                 Aozan now use Kenetre 0.27 has dependency.
			</action>
			<action dev="jourdren" type="fix">
                                 "samplesheet.allow.underscores.in.sample.ids" and "samplesheet.allow.sample.ids.max.length" configuration parameters were not correctly handled.
			</action>
			<action dev="jourdren" type="fix">
                                 Fix discovery of runs generated by RTA 4.
			</action>
			<action dev="jourdren" type="fix">
                                 In IlluminaSampleSheetConverter remove the "Sample_Project" column from sample sheet has it is no more allowed by NextSeq Control Software.
			</action>
		</release>

		</body>
</document>

<?xml version="1.0" encoding="UTF-8"?>

<document>
	<properties>
		<title>Change log</title>
		<author email="jourdren@biologie.ens.fr">Laurent Jourdren</author>
	</properties>
	<body>

		<release version="0.1" description="Aozan version 0.1" date="2011-12-08">
			<action dev="jourdren" type="update">
				Initial version.
			</action>
		</release>

		<release version="0.2" description="Aozan version 0.2" date="2011-12-09">
			<action dev="jourdren" type="add">
				While a run is running on HiSeq, send the first base report when
				available.
			</action>
		</release>

		<release version="0.3" description="Aozan version 0.3" date="2011-12-09">
			<action dev="jourdren" type="add">
				Add a hiseq.deny file that contains all the run ids to not process.
			</action>
			<action dev="jourdren" type="fix">
				Now save a file with the pid of aozan. Now send a mail with the lock
				error only when the lock pid no more exists.
			</action>
			<action dev="jourdren" type="fix">
				Remove temporary files (design, hiseq_log_ directory).
			</action>
			<action dev="jourdren" type="fix">
				Fix issue when zip design files.
			</action>
		</release>

		<release version="0.4" description="Aozan version 0.4" date="2011-12-09">
			<action dev="jourdren" type="fix">
				Fix issue with pid checking of already running aozan process.
			</action>
		</release>

		<release version="0.5" description="Aozan version 0.5" date="2011-12-12">
			<action dev="jourdren" type="add">
				Aozan has now a log file name aozan.log.
			</action>
			<action dev="jourdren" type="add">
				Trace exception in log file.
			</action>
			<action dev="jourdren" type="fix">
				Issue with pid of currently running instance of Aozan.
			</action>
			<action dev="jourdren" type="fix">
				Now get the good Basecall_Stats_FLOWCELLID path even for RTA 1.10.36.
			</action>
			<action dev="jourdren" type="add">
				Now show in log the new disk usage and disk free at the end of sync
				step and demux step.
			</action>
			<action dev="jourdren" type="fix">
				Demux space estimation.
			</action>
		</release>


		<release version="0.6" description="Aozan version 0.6" date="2011-12-16">
			<action dev="jourdren" type="fix">
				Fix mail message when a run is discovered.
			</action>
			<action dev="jourdren" type="update">
				Don't show Aozan welcome message when there is nothing to do.
			</action>
			<action dev="jourdren" type="fix">
				Change
				<a href="http://transcriptome.ens.fr/eoulsan/index.html">Eoulsan</a>
				version dependency. Prevent errors with Casava design CSV file with
				comma in cell value.
			</action>
		</release>

		<release version="0.7" description="Aozan version 0.7" date="2012-02-24">
			<action dev="jourdren" type="fix">
				Fix typo in mail message when the end of run is discovered.
			</action>
			<action dev="jourdren" type="update">
				Now use
				<a href="http://transcriptome.ens.fr/eoulsan/index.html">Eoulsan</a>
				1.2-SNAPSHOT as dependency. New Casava sample sheet check:
				1) Allow the use of a sample in several lanes; 2) new error if a
				sample is used by more than one project; 3) new warning if a sample
				exists in more than one lane;
				4) new warning with the list of line where is a sample (if the number
				of lanes >1); 5) new errors if a sample is defined several time by
				with not the same sequence index.
			</action>
			<action dev="jourdren" type="update">
				In demux step, add Casava design warnings to log and to the success
				mail send to users.
			</action>
			<action dev="jourdren" type="update">
				The default number of threads is now the number of available
				processors/cores.
			</action>
		</release>

		<release version="0.8" description="Aozan version 0.8" date="2012-05-16">
			<action dev="jourdren" type="add">
				Add support for Casava 1.8.2.
			</action>
			<action dev="jourdren" type="add">
				Add Quality control report step.
			</action>
		</release>

		<release version="0.9" description="Aozan version 0.9" date="2012-06-20">
			<action dev="jourdren" type="update">
				When an exception is thrown, send a mail with the exception message and
				traceback.
			</action>
			<action dev="jourdren" type="fix">
				When checking critical space available on HiSeq computer at every Aozan
				startup do not send a message if the HiSeq data path is not
				reachable.
			</action>
			<action dev="jourdren" type="fix">
				In Casava design checking now only allow strings using ascii charset.
			</action>
			<action dev="jourdren" type="fix">
				Aozan qc test do not fail if data to test does not exist.
			</action>
			<action dev="jourdren" type="fix">
				<a href="http://www.bioinformatics.babraham.ac.uk/projects/fastqc/">FastQC</a>
				don't throw exception if no read read.
			</action>
			<action dev="jourdren" type="update">
				No write the qc raw data before the xml qc report.
			</action>
			<action dev="jourdren" type="update">
				If an unexcepted exception is thrown in qc step, now send a mail.
			</action>
		</release>

		<release version="0.10" description="Aozan version 0.10" date="2012-10-08">
			<action dev="jourdren" type="add">
				Jython is now bundled in Aozan.
			</action>
		</release>

		<release version="1.0" description="Aozan version 1.0" date="2013-04-26">
			<action dev="perrin" type="add">
				The quality control step now contains a optional module for assessing sample
				contamination using a re-implementation of FastQ Screen.
			</action>
			<action dev="perrin" type="add">
				Add quality control restoration points to avoid relaunch all the analysis if a fatal error occurs
				before the end.
			</action>
			<action dev="perrin" type="add">
				Now estimate the space needed for the current run and check if enough free space in
				directory for next step is available.
			</action>
			<action dev="perrin" type="add">
				Add a common logger for java and python code.
			</action>
		</release>
		<release version="1.1" description="Aozan version 1.1" date="2013-09-02">
			<action dev="perrin" type="add">
				Add a new module for contamination detection that use partial FASTQ files to reduce
				computation time without lost of information.
			</action>
			<action dev="perrin" type="add">
				Add a collector for reading TileOutMetrics.bin InterOp binary files.
			</action>
			<action dev="perrin" type="add">
				Add a collector for reading ErrorOutMetrics.bin InterOp binary files.
			</action>
			<action dev="perrin" type="add">
				Add a collector for reading ExtractionOutMetrics.bin InterOp binary files.
			</action>
			<action dev="perrin" type="update">
				The contamination detection report is now available in two formats: HTML and
				CSV.
			</action>
			<action dev="perrin" type="add">
				Add contamination detection for paired-end runs. Two modes are available,
				one by mapping only the first read and the other one by mapping both reads.
			</action>
			<action dev="perrin" type="add">
				Add a debug mode in configuration Aozan file.
			</action>
		</release>
		<release version="1.1.1" description="Aozan version 1.1.1"
			date="2013-09-20">
			<action dev="perrin" type="update">
				Aozan now use FastQC 0.10.1.
			</action>
			<action dev="perrin" type="fix">
				Now show values for Undetermined instead of NA.
			</action>
		</release>
		<release version="1.1.2" description="Aozan version 1.1.2"
			date="2013-09-24">
			<action dev="perrin" type="fix">
				Fix missing closing tags in XSL files.
			</action>
		</release>
		<release version="1.1.3" description="Aozan version 1.1.3"
			date="2013-10-14">
			<action dev="perrin" type="fix">
				The change directory to save mapper index can now be set instead of always use /tmp.
			</action>
		</release>
		<release version="1.2" description="Aozan version 1.2" date="2013-12-09">
			<action dev="perrin" type="add">
				Add an optional blast search in the 'Overrepresented Sequences' FastQC module.
				For unidentified sequences, a blastn is launched and the first hit
				is added in the FastQC report.
			</action>
			<action dev="perrin" type="add">
				In Aozan configuration several FastQC parameters can now be set:
				a file with list of contaminants, the kmers size and if each cycles values
				must be displayed.
			</action>
			<action dev="perrin" type="update">
				In the CASAVA/bcl2fastq samplesheet validator, add a tab to check genome
				sample.
			</action>
			<action dev="jourdren" type="add">
				Add an HiSeq data continuous synchronization mode.
			</action>
			<action dev="perrin" type="add">
				Formatter file rules for eclipse or other IDE can be download on
				code.google.com Aozan site.
			</action>
		</release>

		<release version="1.2.1" description="Aozan version 1.2.1"
			date="2014-01-17">
			<action dev="perrin" type="add">
				Homogeization of the configuration settings names. Now use the new Settings class
				to retrieve a configuration value.
			</action>
			<action dev="perrin" type="update">
				In the test on demultiplexing
				data 'percentinlanesample', add a score that depends of the sample count in the
				lane.
			</action>
			<action dev="perrin" type="update">
				Update Guava library version dependency from 14.0.1 to 15.1.
			</action>
		</release>

		<release version="1.2.2" description="Aozan version 1.2.2"
			date="2014-01-28">
			<action dev="perrin" type="fix">
				The mapping for contamination detection was launched in mono-thread mode.
			</action>
		</release>


		<release version="1.2.3" description="Aozan version 1.2.3"
			date="2014-03-11">
			<action dev="perrin" type="fix">
				The alias genome names file used by FastQScreen is updated and no more rewritten.
			</action>
			<action dev="perrin" type="add">
				Now check main parameters from configuration before starting Aozan.
			</action>
			<action dev="perrin" type="fix">
				Launching steps when synchronization step is skipped without entry in infinite loop.
				The useful directory and archives for next steps are been created.
			</action>
			<action dev="perrin" type="fix">
				The QC report is now generated only if one &apos;qc.test&apos; is enabled. Useful collectors are automatically called.
			</action>
			<action dev="jourdren" type="fix">
				The &apos;From&apos; field header in emails sent by Aozan was not set.
			</action>

		</release>

		<release version="1.2.4" description="Aozan version 1.2.4"
			date="2014-03-14">
			<action dev="jourdren" type="fix">
				When check main paths in configuration, the paths are no more converted to lower case.
			</action>
			<action dev="jourdren" type="update">
				Add setting for bcl2fastq/casava compression format (.bz2, .gz, none, bzip2, gz, gzip).
			</action>
			<action dev="perrin" type="fix">
			    Remove blast database prefix configuration setting.
			</action>
		</release>

		<release version="1.2.5" description="Aozan version 1.2.5"
			date="2014-04-04">
			<action dev="perrin" type="fix">
				Now check aozan configuration file at the beginning. Sends an email if fails.
			</action>
		</release>

		<release version="1.2.6" description="Aozan version 1.2.6"
			date="2014-05-06">
			<action dev="perrin" type="fix">
				Now check if FASTQ files are not empty before creating partial FASTQ files used by FastqScreen for contamination detection.
			</action>
		</release>
		<release version="1.2.7" description="Aozan version 1.2.7"
			date="2014-09-01">
			<action dev="perrin" type="update">
				Aozan now requires Java 7 and use samtools/picard 1.92 as dependency.
			</action>
			<action dev="perrin" type="fix">
				Update email sending code. Now the email date is already set.
			</action>
			<action dev="perrin" type="update">
				Compute phasing and prephasing values with RTA v1.18. Ignore null tiles metric values in Interop file.
			</action>
			<action dev="perrin" type="add">
				Add a new web page to explain how to create a plugin for Aozan.
			</action>
		</release>
		<release version="1.2.8" description="Aozan version 1.2.8"
			date="2014-09-11">
			<action dev="perrin" type="fix">
				Fix compute phasing and prephasing values from tiles metric Interop file. Multiply by 100 values to get the same values as before v1.2.7.
			</action>
			<action dev="perrin" type="fix">
				Fix indentation in html report. Fix display error for lines > 1000 characters when processed by some mail server.
			</action>
		</release>

		<release version="1.3" description="Aozan version 1.3"
			date="TBD">
			<action dev="jourdren" type="add">
				Add global tests to the QC step. This new type of test comes with some global tests.
			</action>
			<action dev="jourdren" type="add">
				Add tests to the QC step for analysis undetermined FastQ file, parsing files to recovery clusters by sample from indices sequences with mismatches.
				Create two reports : per indexed lanes and per indexed samples, in csv and html format.
			</action>
			<action dev="sperrin" type="add">
				Add two parameters in configuration to run FastQC and detection contaminants on undetermined FastQC files.
			</action>
			<action dev="sperrin" type="add">
				Now Aozan can read several configuration file to use in multiserver context.
			</action>
			<action dev="sperrin" type="update">
				Now Aozan use blastn from ncbi-blast+ extra blastall.
			</action>
			<action dev="sperrin" type="update">
				Now Aozan use FastQC v0.11.2, enhanced like previous version (bad tiles modules, blastn in Overrepresented sequences modules).
			</action>
			<action dev="sperrin" type="update">
				Now Aozan use bwotie2 mapper for FastqScreen step, default is always bowtie.
			</action>
			<action dev="sperrin" type="update">
				Update control quality report with a table for global tests if necessary.
				Add links to filter sample test table by project name.
			</action>
			<action dev="sperrin" type="add">
				Aozan is now dependancy on Eoulsan-2.0-alpha1 version, related add new dependancy to amazonaws library.
			</action>
		</release>

	</body>
</document>
